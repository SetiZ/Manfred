<html>
<head>
	<title>Manfred quizz</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link rel="stylesheet" type="text/css" href="dots.css">
	<script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>

	<script src="https://www.gstatic.com/firebasejs/3.7.2/firebase.js"></script>
	<script>
	  // Initialize Firebase
	  var config = {
	    apiKey: "AIzaSyDHlqJdk6GGNG1Cd0aL8tSAjcFxp4YlsCM",
	    authDomain: "manfred-4c93e.firebaseapp.com",
	    databaseURL: "https://manfred-4c93e.firebaseio.com",
	    storageBucket: "manfred-4c93e.appspot.com",
	    messagingSenderId: "386216372875"
	  };
	  firebase.initializeApp(config);

	  var ref = firebase.database().ref();
	  var data;

	ref.on("value", function(snapshot) {
	   // console.log(snapshot.val());
	   data = snapshot.val();
	}, function (error) {
	   console.log("Error: " + error.code);
	});
	</script>
</head>
<body>
	<div class="select-zob">
		<label for="zob-size">taille de zob</label>
		<select class="zob-size">
			<option value="2">2 choix</option>
			<option value="4">4 choix</option>
			<option value="0">que dale</option>
		</select>
	</div>
	<div class="map">
		<img class="map-image" src="carte.png">
		<!-- <img class="map-image" src="Capture.PNG"> -->
		<div class="dots">
			<div class="dot warande"></div>
			<div class="dot weppes"></div>
			<div class="dot avelgem"></div>
			<div class="dot avelin"></div>
			<div class="dot attaques"></div>
			<div class="dot mandarins"></div>
			<div class="dot fruges"></div>
			<div class="dot gavrelle"></div>
			<div class="dot mastaing"></div>
			<div class="dot achene"></div>
			<div class="dot chevalet"></div>
			<div class="dot argoeuves"></div>
			<div class="dot capelle"></div>
			<div class="dot mazures"></div>
			<div class="dot lonny"></div>
			<div class="dot latena"></div>
			<div class="dot seuil"></div>
			<div class="dot vesle"></div>
			<div class="dot moulaine"></div>
			<div class="dot vigy"></div>
			<div class="dot ensdorf"></div>
			<div class="dot st_avold"></div>
			<div class="dot marlenheim"></div>
			<div class="dot bezaumont"></div>
			<div class="dot revigny"></div>
			<div class="dot sheer"></div>
			<div class="dot boctois"></div>
			<div class="dot mery"></div>
			<div class="dot houdreville"></div>
			<div class="dot vincey"></div>
			<div class="dot logelbach"></div>
			<div class="dot muhlback"></div>
			<div class="dot eichstetten"></div>
			<div class="dot creney"></div>
			<div class="dot chesnoy"></div>
			<div class="dot villechetive"></div>
			<div class="dot serein"></div>
			<div class="dot vielmoulin"></div>
			<div class="dot grosne"></div>
			<div class="dot sierentz"></div>
			<div class="dot mambelin"></div>
			<div class="dot asphard"></div>
			<div class="dot laufenbourg"></div>
			<div class="dot bassecourt"></div>
			<div class="dot frasne"></div>
			<div class="dot bois_tollot"></div>
			<div class="dot genissiat"></div>
			<div class="dot henri_paul"></div>
			<div class="dot st_vulbas"></div>
			<div class="dot penly"></div>
			<div class="dot limeux"></div>
			<div class="dot barnabos"></div>
			<div class="dot remise"></div>
			<div class="dot havre"></div>
			<div class="dot vaupaliere"></div>
			<div class="dot terrier"></div>
			<div class="dot herse"></div>
			<div class="dot pgas"></div>
			<div class="dot penchard"></div>
			<div class="dot chambry"></div>
			<div class="dot sausset"></div>
			<div class="dot villevaude"></div>
			<div class="dot morbras"></div>
			<div class="dot cirolliers"></div>
			<div class="dot rougemontier"></div>
			<div class="dot cergy"></div>
			<div class="dot tollevast"></div>
			<div class="dot menuel"></div>
			<div class="dot taute"></div>
			<div class="dot tourbe"></div>
			<div class="dot terrette"></div>
			<div class="dot tilleul"></div>
			<div class="dot mezerolles"></div>
			<div class="dot yvelines_ouest"></div>
			<div class="dot villejust"></div>
			<div class="dot gatinais"></div>
			<div class="dot dambron"></div>			
			<div class="dot tabarderie"></div>
			<div class="dot oudon"></div>
			<div class="dot launay"></div>
			<div class="dot la_martyre"></div>
			<div class="dot plaine_haute"></div>
			<div class="dot domloup"></div>
			<div class="dot calan"></div>
			<div class="dot cordemais"></div>
			<div class="dot louisfert"></div>
			<div class="dot moliere"></div>
			<div class="dot les_quintes"></div>
			<div class="dot les_galoreaux"></div>
			<div class="dot distre"></div>
			<div class="dot chaingy"></div>
			<div class="dot verger"></div>
			<div class="dot picocherie"></div>
			<div class="dot villerbon"></div>
			<div class="dot chanceaux"></div>
			<div class="dot avoine"></div>
			<div class="dot larcay"></div>
			<div class="dot jumeaux"></div>
			<div class="dot granzay"></div>
			<div class="dot rom"></div>
			<div class="dot valdivienne"></div>
			<div class="dot eguzon"></div>
			<div class="dot perguillac"></div>
			<div class="dot braud"></div>
			<div class="dot marmagne"></div>
			<div class="dot gauglin"></div>
			<div class="dot st_eloi"></div>
			<div class="dot bayet"></div>
			<div class="dot rulhat"></div>
			<div class="dot grepilles"></div>
			<div class="dot charpenay"></div>
			<div class="dot echalas"></div>
			<div class="dot pivoz_cordier"></div>
			<div class="dot coulange"></div>
			<div class="dot verbois"></div>
			<div class="dot chamoson"></div>
			<div class="dot cornier"></div>
			<div class="dot creys"></div>
			<div class="dot montagny"></div>
			<div class="dot alberville"></div>
			<div class="dot rondissone"></div>
			<div class="dot gde_ile"></div>
			<div class="dot chaffard"></div>
			<div class="dot champagnier"></div>
			<div class="dot beaumont"></div>
			<div class="dot vaujany"></div>
			<div class="dot coche"></div>
			<div class="dot la_praz"></div>
			<div class="dot villarodin"></div>
			<div class="dot venaus"></div>
			<div class="dot tricastin"></div>
			<div class="dot tavel"></div>
			<div class="dot agasses"></div>
			<div class="dot jonquieres"></div>
			<div class="dot tore_supra"></div>
			<div class="dot prionnet"></div>
			<div class="dot boutre"></div>
			<div class="dot realtor"></div>
			<div class="dot neoules"></div>
			<div class="dot trans"></div>
			<div class="dot biancon"></div>
			<div class="dot broc_carros"></div>
			<div class="dot ponteau"></div>
			<div class="dot feuillane"></div>
			<div class="dot plaud"></div>
			<div class="dot clearac"></div>
			<div class="dot cubnezais"></div>
			<div class="dot marquis"></div>
			<div class="dot saucats"></div>
			<div class="dot cantegrit"></div>
			<div class="dot argia"></div>
			<div class="dot hernani"></div>
			<div class="dot breuil"></div>
			<div class="dot rueyeres"></div>
			<div class="dot donzac"></div>
			<div class="dot lesquive"></div>
			<div class="dot verfeil"></div>
			<div class="dot cazaril"></div>
			<div class="dot marsillon"></div>
			<div class="dot issel"></div>
			<div class="dot gaudiere"></div>
			<div class="dot tamareau"></div>
			<div class="dot baixas"></div>
			<div class="dot vich"></div>
			<div class="dot santa_llogia"></div>			
		</div>
	</div>
	<div class="questions">
		<div class="inside">
			<div class="win"></div>
			<ul id="suggestions">
			</ul>
		</div>
	</div>
	<script type="text/javascript">
		$(".dot").click(function() {
			var myclicked = this.className.substring(4);
			// get random

			// var randomProperty = function (obj) {
			//     var keys = Object.keys(obj)
			//     console.log(keys)
			//     return obj[keys[ keys.length * Math.random() << 0]];
			// };
			// console.log(randomProperty(data))

			function getRandomArrayElements(arr, count) {
				var keys = Object.keys(arr)
			    var shuffled = keys.slice(0), i = keys.length, min = i - count, temp, index;
			    while (i-- > min) {
			        index = Math.floor((i + 1) * Math.random());
			        temp = shuffled[index];
			        shuffled[index] = shuffled[i];
			        shuffled[i] = temp;
			    }
			    return shuffled.slice(min);
			}

			var results = getRandomArrayElements(data, 3);
			results.unshift(myclicked);
			// console.log(results)
			// remove duplicate
			var unique = results.filter(function(elem, index, self) {
			    return index == self.indexOf(elem);
			})
			var items = [];

			// randomize
			function shuffle(array) {
			  var currentIndex = array.length, temporaryValue, randomIndex;

			  // While there remain elements to shuffle...
			  while (0 !== currentIndex) {

			    // Pick a remaining element...
			    randomIndex = Math.floor(Math.random() * currentIndex);
			    currentIndex -= 1;

			    // And swap it with the current element.
			    temporaryValue = array[currentIndex];
			    array[currentIndex] = array[randomIndex];
			    array[randomIndex] = temporaryValue;
			  }

			  return array;
			}

			function clean() {
				$('#suggestions').html('')
				$(".win").text("")
			}
		   
		   	results = shuffle(results);

			for (i=0; i<(results.length); i ++) {
		          items.push('<li class="sugg ' + results[i] + '">' + results[i] + '</li>');
		   }

		   $('#suggestions').append( items.join('') );
		   $('.questions').show();

		  	$(".sugg").click(function() {
				var clicked = this.className.substring(5)
				if (clicked == myclicked) {
					$(".win").text("gagn√© !")
					$(".questions").delay(1000).hide(0)
					setTimeout(clean, 2000);
				} else {
					$(".win").text("Perdu !")
				}
			})
		})



	</script>
</body>
</html>